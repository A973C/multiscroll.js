/**
 * multiscroll.js 0.0.2 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(a){a.fn.multiscroll=function(c){function t(){n=a(window).height();p();a.isFunction(c.afterResize)&&c.afterResize.call(this)}function p(){c.css3?(m(a(".ms-left"),"translate3d(0px, -"+a(".ms-left").find(".ms-section.active").position().top+"px, 0px)",!1),m(a(".ms-right"),"translate3d(0px, -"+a(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(a(".ms-left").css("top",-a(".ms-left").find(".ms-section.active").position().top),a(".ms-right").css("top",-a(".ms-right").find(".ms-section.active").position().top))}
function g(b){var d=b.index(),q=a(".ms-right").find(".ms-section").eq(u-1-d),f=b.data("anchor"),e=a(".ms-left .ms-section.active").index()+1,g=v(b);k=!0;c.anchors.length&&(location.hash=f);var h={left:b.position().top,right:q.position().top};q.addClass("active").siblings().removeClass("active");b.addClass("active").siblings().removeClass("active");c.css3?(a.isFunction(c.onLeave)&&c.onLeave.call(this,e,d+1,g),b="translate3d(0px, -"+h.left+"px, 0px)",h="translate3d(0px, -"+h.right+"px, 0px)",m(a(".ms-left"),
b,!0),m(a(".ms-right"),h,!0),setTimeout(function(){a.isFunction(c.afterLoad)&&c.afterLoad.call(this,f,d+1);setTimeout(function(){k=!1},r)},c.scrollingSpeed)):(a.isFunction(c.onLeave)&&c.onLeave.call(this,e,d+1,g),a(".ms-left").animate({top:-h.left},c.scrollingSpeed,c.easing,function(){a.isFunction(c.afterLoad)&&c.afterLoad.call(this,f,d+1);setTimeout(function(){k=!1},r)}),a(".ms-right").animate({top:-h.right},c.scrollingSpeed,c.easing));lastScrolledDestiny=f;w(f);x(f,d)}function s(){document.addEventListener?
(document.addEventListener("mousewheel",e,!1),document.addEventListener("wheel",e,!1)):document.attachEvent("onmousewheel",e)}function e(b){b=window.event||b;b=Math.max(-1,Math.min(1,b.wheelDelta||-b.deltaY||-b.detail));k||(0>b?a.fn.multiscroll.moveSectionDown():a.fn.multiscroll.moveSectionUp());return!1}function m(b,a,c){b.toggleClass("easing",c);b.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,transform:a})}function x(b,d){c.navigation&&(a("#multiscroll-nav").find(".active").removeClass("active"),
b?a("#multiscroll-nav").find('a[href="#'+b+'"]').addClass("active"):a("#multiscroll-nav").find("li").eq(d).find("a").addClass("active"))}function w(b){c.menu&&(a(c.menu).find(".active").removeClass("active"),a(c.menu).find('[data-menuanchor="'+b+'"]').addClass("active"))}function v(b){var c=a(".ms-left .ms-section.active").index();b=b.index();return c>b?"up":"down"}function y(){var a=document.createElement("p"),c,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",
MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var f in e)void 0!==a.style[f]&&(a.style[f]="translate3d(1px,1px,1px)",c=window.getComputedStyle(a).getPropertyValue(e[f]));document.body.removeChild(a);return void 0!==c&&0<c.length&&"none"!==c}function z(a){var d=n;if(c.paddingTop||c.paddingBottom)a=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),d=n-a;return d}c=a.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!0,
sectionsColor:!1,navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,afterLoad:null,onLeave:null,afterRender:null,afterResize:null},c);var r=600,u=a(".ms-left").find(".ms-section").length,k=!1,l,n=a(window).height();s();c.css3&&(c.css3=y());c.navigation&&(a("body").append('<div id="multiscroll-nav"><ul></ul></div>'),l=a("#multiscroll-nav"),
l.css("color",c.navigationColor),l.addClass(c.navigationPosition));a(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%"});a(".ms-right").css({right:"0",top:"0"});a(".ms-left").css({left:"0",top:"0"});a(".ms-left .ms-section, .ms-right .ms-section").each(function(){var b=a(this).index();"undefined"!==typeof c.sectionsColor[b]&&a(this).css("background-color",c.sectionsColor[b]);"undefined"!==typeof c.anchors[b]&&a(this).attr("data-anchor",c.anchors[b]);if(c.verticalCentered){var d=
a(this);d.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+z(d)+'px" />')}a(this).closest(".ms-left").length&&c.navigation&&(d="",c.anchors.length&&(d=c.anchors[b]),b=c.navigationTooltips[b],"undefined"===typeof b&&(b=""),l.find("ul").append('<li data-tooltip="'+b+'"><a href="#'+d+'"><span></span></a></li>'))});a(".ms-right").html(a(".ms-right").find(".ms-section").get().reverse());a(".ms-left .ms-section, .ms-right .ms-section").each(function(){var b=a(this).index();fromTop=
100*b;a(this).css({height:"100%",display:"block"});b||l.find("li").eq(b).find("a").addClass("active")}).promise().done(function(){a(".ms-right").find(".ms-section").last().addClass("active");a(".ms-left").find(".ms-section").first().addClass("active");a.isFunction(c.afterRender)&&c.afterRender.call(this)});p();a(window).on("hashchange",function(){var b=window.location.hash.replace("#",""),c=isNaN(b)?a(".ms-left").find('[data-anchor="'+b+'"]'):a(".ms-left .ms-section").eq(destiny-1);"undefined"!==
typeof lastScrolledDestiny&&b===lastScrolledDestiny||g(c)});a(document).keydown(function(b){if(c.keyboardScrolling&&!k)switch(b.which){case 38:case 33:a.fn.multiscroll.moveSectionUp();break;case 40:case 34:a.fn.multiscroll.moveSectionDown()}});a(document).on("click","#multiscroll-nav a",function(b){b.preventDefault();b=a(this).parent().index();g(a(".ms-left .ms-section").eq(b))});a(document).on({mouseenter:function(){var b=a(this).data("tooltip");a('<div class="multiscroll-tooltip '+c.navigationPosition+
'">'+b+"</div>").hide().appendTo(a(this)).fadeIn(200)},mouseleave:function(){a(this).find(".multiscroll-tooltip").fadeOut().remove()}},"#multiscroll-nav li");c.normalScrollElements&&(a(document).on("mouseover",c.normalScrollElements,function(){a.fn.multiscroll.setMouseWheelScrolling(!1)}),a(document).on("mouseout",c.normalScrollElements,function(){a.fn.multiscroll.setMouseWheelScrolling(!0)}));a(window).resize(function(){t()});a.fn.multiscroll.moveSectionUp=function(){var b=a(".ms-left .ms-section.active").prev(".ms-section");
!b.length&&c.loopTop&&(b=a(".ms-left .ms-section").last());b.length&&g(b)};a.fn.multiscroll.moveSectionDown=function(){var b=a(".ms-left .ms-section.active").next(".ms-section");!b.length&&c.loopBottom&&(b=a(".ms-left .ms-section").first());b.length&&g(b)};a.fn.multiscroll.moveTo=function(b){var c="",c=isNaN(b)?a('.ms-left [data-anchor="'+b+'"]'):a(".section").eq(b-1);g(c)};a.fn.multiscroll.setKeyboardScrolling=function(a){c.keyboardScrolling=a};a.fn.multiscroll.setMouseWheelScrolling=function(a){a?
s():document.addEventListener?(document.removeEventListener("mousewheel",e,!1),document.removeEventListener("wheel",e,!1)):document.detachEvent("onmousewheel",e)};a.fn.multiscroll.setScrollingSpeed=function(a){c.scrollingSpeed=a}}})(jQuery);